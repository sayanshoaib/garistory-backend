version: '3'
services:
  garistory-backend:
    image: golang:1.16
    working_dir: /app
    volumes:
      - .:/app
    depends_on:
      - garistory-db
    ports:
      - '8080:8080'
    environment:
      - DATABASE_URL=postgres://shoaib:garistory123@db:5432/garistory-db
    command: go run cmd/main.go

  garistory-db:
    image: postgres:latest
    restart: always
    environment:
      - POSTGRES_USER=shoaib
      - POSTGRES_PASSWORD=garistory123
      - POSTGRES_DB=garistory-db
